# 基于跳表的 KV 存储引擎

众所周知，非关系行数据库 redis，其核心存储引擎的数据结构就是跳表。

本项目就是基于跳表，使用 C++实现的轻量级键值型存储引擎。

# API 接口

- insert 插入数据
- erase 删除数据
- revise 修改数据
- find 查找数据
- show 显示当前跳表数据
- storeFile 数据存档
- loadFile 数据加载
- size 返回数据规模

# 存储引擎数据表现

## 插入操作

跳表最大层数：32

采用随机插入数据测试：

| 插入数据规模（万条） | 耗时（秒） |
| -------------------- | ---------- |
| 10                   | 0.152019   |
| 100                  | 3.36207    |
| 800                  | 32.3822    |

每秒可处理写请求数目（QPS）：24.7049W

## 读取数据操作

| 取数据规模（万条） | 耗时（秒） |
| ------------------ | ---------- |
| 10                 | 0.0286136  |
| 100                | 0.705726   |
| 800                | 21.6158    |

每秒可处理读请求数目（QPS）：30.88W

# 项目运行方式

- main.cpp 运行：

```
make            // 编译
make run        // 运行
```

或者

```
sh skiplist_run.sh
```

- 读写测试程序运行 (可以自行打开 ./stress_test/stress_test.cp 修改线程 和 自定义数据规模。)

```
sh stress_test.sh
```

# 待优化问题

- 跳表的 K V 类型，目前仅支持 int 型。
- 由于使用 互斥锁来保证增删时的线程安全，因此多线程情况下的测试性能表现不如单线程测试。
